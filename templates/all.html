{% extends "_base.html" %}

{% block head %}
<script src="/js/all.js"></script>
{% endblock %}

{% block title %}
All
{% endblock %}

{% block body %}
{% if is_logged_in %}
{% include "_top_menu.html" %}
{% endif %}

<div id="all">
  <ul class="list-group">
    {% for s in list_and_items %}
    <div class="list-group">
      <a class="list-name list-group-item list-group-item-action justify-content-between" 
         href="/list?key={{ s.key }}">{{ s.name|safe }}
        {% if s.num_p0 > 0 %}
        <span class="label label-danger">{{ s.num_p0 }}</span>
        {% endif %}
        {% if s.num_p1 > 0 %}
        <span class="label label-warning">{{ s.num_p1 }}</span>
        {% endif %}
        {% if s.num_p2 > 0 %}
        <span class="label label-info">{{ s.num_p2 }}</span>
        {% endif %}
        {% if s.num_p3 > 0 %}
        <span class="label label-success">{{ s.num_p3 }}</span>
        {% endif %}
        {% if s.num_p4 > 0 %}
        <span class="label label-primary">{{ s.num_p4 }}</span>
        {% endif %}
        {% if s.num_open > 0 %}
        <span class="badge badge-default badge-pill">{{ s.num_open }}</span>
        {% endif %}
      </a>
      <div class="list-group">
        {% for item in s.open_items %}
        <a class="list-group-item list-group-item-action"
           href="#"
           onclick="markItemDone('{{ item.key }}')">
          {% include "_item.html" %}
        </a>
        {% endfor %}
        {% for item in s.done_items %}
        <a class="list-group-item list-group-item-action done"
           href="#"
           onclick="markItemOpen('{{ item.key }}')">
          {% include "_item.html" %}
        </a>
        {% endfor %}
      </div>
    </div>
    {% endfor %}
  </ul>
</div>
{% endblock %}
